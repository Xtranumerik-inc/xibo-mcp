# ============================================================================
# XIBO MCP SERVER CONFIGURATION v2.0
# Professional Edition - Support OAuth2 + Direct User Authentication
# ============================================================================

# ============================================================================
# AUTHENTICATION CONFIGURATION
# Choose your authentication method: "client_credentials" or "direct_user"
# ============================================================================

# AUTHENTICATION MODE
# - "client_credentials": Traditional OAuth2 app authentication (requires client_id/secret)
# - "direct_user": Direct username/password authentication (simpler setup)
XIBO_AUTH_MODE=direct_user

# ============================================================================
# XIBO CMS CONNECTION
# ============================================================================
XIBO_API_URL=https://your-xibo-instance.com

# ============================================================================
# OPTION 1: CLIENT CREDENTIALS MODE (OAuth2 App Authentication)
# Use these settings if XIBO_AUTH_MODE=client_credentials
# ============================================================================
# Create an OAuth2 application in your Xibo CMS:
# 1. Go to Applications ‚Üí Add Application
# 2. Set it as "Confidential Client" 
# 3. Enable "Client Credentials" grant type
# 4. Copy the client ID and secret below

# XIBO_CLIENT_ID=your_client_id_here
# XIBO_CLIENT_SECRET=your_client_secret_here

# ============================================================================
# OPTION 2: DIRECT USER MODE (Username/Password Authentication) 
# Use these settings if XIBO_AUTH_MODE=direct_user - MUCH SIMPLER!
# ============================================================================
# Simply use your existing Xibo CMS login credentials
# No OAuth2 app setup required!

XIBO_USERNAME=your_username
XIBO_PASSWORD=your_password

# Note: Direct User mode features:
# - ‚úÖ Zero OAuth2 configuration required
# - ‚úÖ Uses your existing Xibo account
# - ‚úÖ Automatic permission detection based on your user level
# - ‚úÖ Dynamic tool filtering (only shows tools you can access)
# - ‚úÖ Session management with auto-refresh
# - ‚úÖ MFA support (if enabled on your account)

# ============================================================================
# COMPANY BRANDING
# ============================================================================
COMPANY_NAME=Xtranumerik Inc.
LOGO_PATH=/assets/logo-xtranumerik.png

# ============================================================================
# GEOGRAPHIC CONFIGURATION - Quebec/Montreal Optimized
# ============================================================================
# Format: JSON object with zone names as keys and city arrays as values
GEO_ZONES={"quebec":{"name":"R√©gion de Qu√©bec","cities":["Quebec City","L√©vis","Beauport","Charlesbourg"],"tags":["quebec","capitale"]},"montreal":{"name":"R√©gion de Montr√©al","cities":["Montreal","Laval","Longueuil","Brossard","Saint-Laurent"],"tags":["montreal","metropole"]},"national":{"name":"National","cities":["all"],"tags":["canada","national"]}}

# Default cities to exclude from broadcasts (comma-separated)
DEFAULT_EXCLUDE_CITIES=Test City,Demo Location

# ============================================================================
# REGIONAL PERMISSIONS - Advanced Access Control
# ============================================================================
# Format: JSON object defining client permissions per region
REGION_PERMISSIONS={"client_montreal":{"regions":["montreal"],"permissions":["view","edit_content"],"clientType":"external"},"client_quebec":{"regions":["quebec"],"permissions":["view","edit_content","manage_displays"],"clientType":"external"},"internal_admin":{"regions":["all"],"permissions":["all"],"clientType":"internal"}}

# ============================================================================
# CONTENT TAGGING SYSTEM
# ============================================================================
# Default tags for content categorization (comma-separated)
DEFAULT_TAGS=advertising,information,emergency,promotion,seasonal,restaurant,menu,weather

# ============================================================================
# MCP SERVER CONFIGURATION
# ============================================================================
MCP_SERVER_NAME=xibo-mcp
MCP_SERVER_VERSION=2.0.0
MCP_SERVER_PORT=3000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log levels: debug, info, warn, error
LOG_LEVEL=info
LOG_FILE=xibo-mcp.log

# ============================================================================
# PERFORMANCE SETTINGS
# ============================================================================
# Cache settings for better performance
CACHE_TTL=300
ENABLE_CACHE=true

# API rate limiting (requests per window)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# ============================================================================
# ADVANCED FEATURES - Professional Edition
# ============================================================================

# Emergency Alert System
EMERGENCY_ALERTS_ENABLED=true
EMERGENCY_DEFAULT_DURATION=300
EMERGENCY_PRIORITY_OVERRIDE=true

# Menu Board System for Restaurants
MENU_BOARDS_ENABLED=true
MENU_PRICE_FORMAT=CAD
MENU_LANGUAGE_DEFAULT=bilingual

# Weather Integration (Environment Canada)
WEATHER_INTEGRATION_ENABLED=true
WEATHER_API_KEY=your_weather_api_key
WEATHER_DEFAULT_LOCATION=Montreal,QC

# Multi-CMS Synchronization
SYNC_ENABLED=false
SYNC_TARGET_CMS=https://backup-xibo.com
SYNC_INTERVAL_HOURS=24

# ============================================================================
# TIMEZONE AND LOCALIZATION
# ============================================================================
# Automatic EST/EDT timezone handling for Quebec/Montreal
TIMEZONE=America/Montreal
LOCALE=fr_CA
DATE_FORMAT=YYYY-MM-DD
TIME_FORMAT=HH:mm

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
# Session timeout for Direct User mode (minutes)
SESSION_TIMEOUT=480

# Enable MFA support for Direct User mode
MFA_ENABLED=true

# IP filtering (comma-separated, optional)
# ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8
# BLOCKED_IPS=

# ============================================================================
# QUICK START EXAMPLES
# ============================================================================

# EXAMPLE 1: Simple Direct User Setup (Recommended for most users)
# XIBO_API_URL=https://cms.mycompany.com
# XIBO_AUTH_MODE=direct_user
# XIBO_USERNAME=admin
# XIBO_PASSWORD=mypassword
# ‚Üí Ready to go! No OAuth2 setup needed.

# EXAMPLE 2: Traditional OAuth2 Setup (For apps/integrations)
# XIBO_API_URL=https://cms.mycompany.com  
# XIBO_AUTH_MODE=client_credentials
# XIBO_CLIENT_ID=abc123
# XIBO_CLIENT_SECRET=xyz789
# ‚Üí Requires OAuth2 application setup in Xibo CMS.

# EXAMPLE 3: Montreal Restaurant Chain
# XIBO_API_URL=https://cms.restaurants-mtl.com
# XIBO_AUTH_MODE=direct_user
# XIBO_USERNAME=manager
# XIBO_PASSWORD=secure123
# GEO_ZONES={"montreal":{"name":"Montr√©al","cities":["Montreal","Laval","Brossard"]}}
# MENU_BOARDS_ENABLED=true
# ‚Üí Perfect for restaurant menu management.

# ============================================================================
# TROUBLESHOOTING
# ============================================================================

# Issue: "Authentication failed"
# Solution for Direct User mode:
# 1. Verify XIBO_USERNAME and XIBO_PASSWORD are correct
# 2. Check that the user account is not disabled
# 3. Ensure MFA is properly configured if enabled
# 4. Try setting LOG_LEVEL=debug for more details

# Issue: "No tools available"
# Solution:
# 1. Check your user permissions in Xibo CMS
# 2. Verify the user has appropriate group memberships
# 3. The system automatically filters tools based on your access level

# Issue: "Connection refused"
# Solution:
# 1. Verify XIBO_API_URL is correct and accessible
# 2. Check firewall/network settings
# 3. Ensure Xibo CMS is running and responsive

# ============================================================================
# SUPPORT
# ============================================================================
# üìß Email: support@xtranumerik.ca
# üåê Website: https://www.xtranumerik.ca
# üìû Phone: Professional support available
# üìö Documentation: docs/ folder in this repository